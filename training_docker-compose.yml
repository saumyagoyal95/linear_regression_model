version: '3.8'
# To rebuild images when Dockerfile or source code changes, use:
# docker compose up --build
services:
  mlflow:
    image: mlflow:latest
    ports:
      - "5000:5000"
    volumes:
      - mlflow_artifacts:/mlflow/artifacts
    environment:
      MLFLOW_TRACKING_URI: http://mlflow:5000
      MLFLOW_ARTIFACTS_URI: /mlflow/artifacts
      
volumes:
  mlflow_artifacts:
    driver: local
    driver_opts:
      type: none
      device: ./training/mlflow_artifacts
      o: bind
